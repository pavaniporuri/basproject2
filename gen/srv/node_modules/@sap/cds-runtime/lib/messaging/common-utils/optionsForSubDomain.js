// Example: "https://" + subDomain + ".authentication.sap.hana.ondemand.com/oauth/token"
// Points are not allowed in subDomain.
const _modifiedEndpoint = (endpoint, subDomain) =>
  endpoint.replace(/(^https:\/\/)([^.]+)(\..+$)/, '$1' + subDomain + '$3')

const amqpForSubDomain = (amqp, subDomain) => {
  const endpointForSubdomain = _modifiedEndpoint(amqp.oa2.endpoint, subDomain)
  return { ...amqp, oa2: { ...amqp.oa2, endpoint: endpointForSubdomain } }
}

module.exports = {
  amqpForSubDomain
}
